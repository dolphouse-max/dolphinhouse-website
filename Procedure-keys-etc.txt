MSG91 Authkey: Found in your MSG91 account under API settings, this is a static key for authentication.
Sender ID: An approved Sender ID registered on both the DLT platform (like Vilpower) and your MSG91 account.
DLT Entity ID: Your unique identification number assigned by the DLT platform after you register your business entity.
DLT Template ID: A

VILPOWER
MSG91_AUTH_KEY : 473324ARxQLJ59B768ecb81bP1
VILPOWER_TEMPLATE_ID_OTP : 1107176123434997840
VILPOWER_SENDER_ID : DLHNOS 
VILPOWER_PEID : 1101212580000089778  
VILPOWER_API_URL:  https://api.msg91.com/api/v5/otp

- VILPOWER_API_KEY : 473324ARxQLJ59B768ecb81bP1 ( This is actually Msg91 API key)
-MSG91 TEMPLATE ID: 690ae3bf3debf520f86fd515  

- MSG91 fallback values:
- MSG91_AUTH_KEY : 473324ARxQLJ59B768ecb81bP1
- MSG91_TEMPLATE_ID : 690ae3bf3debf520f86fd515 
====================================================================
OTP Widget


  const url = new URL(
    'https://control.msg91.com/api/v5/widget/verifyAccessToken'
  );
  let headers = {
    "Content-Type": "application/json",
    "Accept": "application/json",
  };

  let body = {
  "authkey": "473324ARxQLJ59B768ecb81bP1",
  "access-token": "{jwt_token_from_otp_widget}"
}
  fetch(url, {
      method: 'POST',
      headers: headers,
      body:  JSON.stringify(body)
  })
  .then(response => response.json())
  .then(json => console.log(json));
===============================================================

Username: admin Password: dolphin2023
Account ID:  e8e9c4e8cbb5cd7137842f51149f8b10
==============================================================================
SELECT id, text FROM knowledge_chunks;
==============================================================================

D1_Vectorize_Admin_Final API token  : SuKo7VqcIYxF6oN8_X0-KVgXXRfxhyB_gOY_J8lU

email bot Vectorize secret  dh-reindex-2025-key
========================================
$env:CLOUDFLARE_API_TOKEN="SuKo7VqcIYxF6oN8_X0-KVgXXRfxhyB_gOY_J8lU"
$env:CLOUDFLARE_ACCOUNT_ID = "e8e9c4e8cbb5cd7137842f51149f8b10"
===========================================
$D1_ID = "906d5bbf-24bf-4bac-8237-9fc8e197d382" 
$ACCOUNT_ID = "e8e9c4e8cbb5cd7137842f51149f8b10" 
$API_TOKEN = "9KDr1qGacuSL4MkxQsmlSWV_Oi4-oOROpls3HnzN"  

=================================================
$env:CLOUDFLARE_API_TOKEN = "HOOaZhjyHufOBnAOWXxwFd57KSHK4WZoY06L1ec9"
$env:CLOUDFLARE_ACCOUNT_ID = "e8e9c4e8cbb5cd7137842f51149f8b10"
Remove-Item Env:CF_API_TOKEN -ErrorAction SilentlyContinue
Remove-Item Env:CF_ACCOUNT_ID -ErrorAction SilentlyContinue

=========================================
git add .
git commit -m "Fix: Pause booking"
git push

git add src/pages/booking.astro 
git commit -m "Phase 1: html correction"
git push

git add wrangler.toml
git commit -m "Make wrangler.toml Pages-only (remove Worker keys)"
git push origin master
============================================================

npx --yes wrangler@latest tail dolphinhouse-emailbot --format pretty


==============================================================
üß© The 3 EmailJS Keys You‚Äôll See

Purpose	Example	Where to find it	Used in code

1Ô∏è‚É£ Service ID	service_xxxxx	After you connect Gmail/Outlook/SMTP in EmailJS under Email Services	emailjs.send("service_xxxxx", ...)

2Ô∏è‚É£ Template ID	booking_notification	When you create your email template under Email Templates	emailjs.send(..., "booking_notification", ...)

3Ô∏è‚É£ Public Key (previously called User ID)	your_public_key_abc123	Account ‚Üí API Keys section in EmailJS Dashboard	emailjs.init("your_public_key_abc123")

===============================================================
Public Key :  vYmRU-6Ws4Ms2H9yj

Service ID :  service_zw6trxu

Template ID:  template_3giqgsg

========================================
Github

 0ABF-0C04
===================================================================
msg91 auth key

auth key:  473324ARxQLJ59B768ecb81bP1
Template id:   68ee3244b19fba0551555855
============================================================
Vilpower
Principal Entity ID (PE ID).: 1101212580000089778  

DLHNOS - 1105176101342752881 

Name of Principal Entity : Dolphin House Beach Resort

Life of Header : 363 days

Header expiry date : 2026-10-19 

Template ID : 1107176121900123714

=============================================

curl https://dolphinhouse-website.pages.dev/api/bookings



cd C:\dolphinhouse-website

git add . 

git commit -m "Corrected Booking.astro" 

git push

‚òÅÔ∏è As soon as you push, Cloudflare Pages will automatically detect the commit, rebuild, and deploy your site.


==========================================================================================

Quick Tips for Maintaining Your Chatbot

1. Add more knowledge as needed:

sql-- In Cloudflare D1 Console
INSERT INTO knowledge_chunks (id, source, ref, text, createdAt)
VALUES ('new-id', 'source', 'ref', 'Your new information here', datetime('now'));

2. Check your OpenAI costs:

https://platform.openai.com/usage

3. If chatbot gets too many similar questions:

Add that info to your knowledge base!

=============================================================================================
Creating Chatbot for Whatsapp

Yes, you can absolutely do this. You have already built the most difficult part: the "brain" of your chatbot (the RAG logic using D1 and OpenAI).

Your current website chatbot works like this: Chat Widget -> Cloudflare Worker (/api/chat) -> D1 + OpenAI -> Cloudflare Worker -> Chat Widget

A WhatsApp chatbot just replaces the "Chat Widget" with "WhatsApp." The "brain" remains the same.

User's WhatsApp -> WhatsApp Servers -> Your Cloudflare Worker -> D1 + OpenAI -> Your Cloudflare Worker -> WhatsApp Servers -> User's WhatsApp

To make this work, you need two new components:

The WhatsApp Business Platform: A service that gives you an API for your WhatsApp business number.

A Webhook Endpoint: A new URL on your Cloudflare Worker that WhatsApp can send messages to.

## How to Build and Connect It
Here is a step-by-step plan for a developer.

### 1. Get Access to the WhatsApp Business API
You cannot connect directly to WhatsApp. You must go through a Business Solution Provider (BSP) or use Meta's own Cloud API.

BSP (Recommended for Speed): Companies like Twilio, Gupshup, or MessageBird handle all the setup, approval, and give you a simple API to use. This is the fastest way to get started.

Meta Cloud API (Cheaper, More Control): You can set this up yourself through the Meta for Developers portal. It's more complex but cheaper in the long run.

Your BSP or the Meta dashboard will give you two key things:

An Auth Token (an API key).

A place to enter your Webhook URL.

### 2. Create Your New Webhook in Cloudflare
This is the most important part of your code. Your existing chat.js is built to respond to your website. You'll need a new API route that is built to respond to WhatsApp.

In your project, you might create a new file like src/pages/api/whatsapp.js.

This file will do four things:

Receive the Message: It will get a POST request from WhatsApp (via your BSP) every time a user texts your number. The user's message will be in a JSON payload.

Refactor Your Logic: You should move your core "brain" (the D1 search and the OpenAI call) from chat.js into a separate, reusable function. Let's call it getChatbotReply(message).

Call Your "Brain": Your new whatsapp.js webhook will call this getChatbotReply(message) function with the text from the WhatsApp message.

Send the Reply: You cannot just return JSON in the response. A webhook must send a new, separate API call back to your BSP (e.g., Twilio's API) telling them to send the reply to the user.

Here is a simplified example of what your new whatsapp.js might look like:


// src/pages/api/whatsapp.js
// (This is a simplified example)

// 1. Import your "brain"
import { getChatbotReply } from '../../services/ragService'; 

export async function POST({ locals, request }) {
  const db = locals.runtime.env.DB;
  const OPENAI_API_KEY = locals.runtime.env.OPENAI_API_KEY;
  const TWILIO_AUTH_TOKEN = locals.runtime.env.TWILIO_AUTH_TOKEN;

  try {
    // 2. Get the message from WhatsApp/Twilio
    // The format will depend on your BSP (Twilio, Gupshup, etc.)
    const incomingData = await request.formData();
    const userMessage = incomingData.get('Body');
    const userPhone = incomingData.get('From'); // e.g., 'whatsapp:+14155238886'

    console.log(`Message from ${userPhone}: ${userMessage}`);

    // 3. Call your existing RAG logic (the "brain")
    const { reply } = await getChatbotReply(userMessage, db, OPENAI_API_KEY);

    // 4. Send the reply back via the BSP's API (e.g., Twilio)
    const twilioReplyUrl = `https://api.twilio.com/2010-04-01/Accounts/[YOUR_TWILIO_SID]/Messages.json`;
    
    await fetch(twilioReplyUrl, {
      method: 'POST',
      headers: {
        'Authorization': `Basic ${btoa(`[YOUR_TWILIO_SID]:${TWILIO_AUTH_TOKEN}`)}`,
        'Content-Type': 'application/x-www-form-urlencoded'
      },
      body: new URLSearchParams({
        To: userPhone,
        From: '[YOUR_WHATSAPP_NUMBER]', // e.g., 'whatsapp:+14155238886'
        Body: reply
      })
    });

    // 5. Respond to the webhook request itself
    // We send an empty 200 OK to tell WhatsApp "we got the message"
    return new Response(null, { status: 200 });

  } catch (err) {
    console.error("‚ùå WhatsApp Webhook Error:", err);
    // If something breaks, still tell WhatsApp "it's ok" to prevent retries
    return new Response(null, { status: 200 }); 
  }
}

```
=========================================================================

That's a fantastic advantage of using GitHub for your website! The entire point of a service like GitHub is to serve as an off-site backup.

If your laptop completely fails, you can recover and resume work on a new computer (or any computer) in a few simple steps.

The Recovery Process (on your new computer)
Since your website is on GitHub, it's safe. All you need to do is clone the repository onto your new machine.

Prerequisites:

A new computer (or a working one).

Internet access.

Your GitHub login credentials (username and password/Personal Access Token).

Git installed on the new computer.

Steps to Recover Your Website:

Install Git: Download and install Git for your new computer's operating system (Windows, Mac, or Linux).

Log in to GitHub: Open your web browser and log in to your GitHub account to find the repository for your "Dolphin House" website.

Get the Clone URL:

Navigate to your website's repository page on GitHub.

Click the green < > Code button.

Copy the HTTPS URL (e.g., https://github.com/your-username/dolphin-house.git).

Clone the Repository:

Open your terminal (or Command Prompt/Git Bash) on the new computer.

Navigate to the folder where you want to store your website files.

Run the git clone command using the URL you copied:

Bash

git clone https://github.com/your-username/dolphin-house.git
This will download the entire website project‚Äîincluding all the code, history, and the hidden .git folder‚Äîto a new folder named dolphin-house on your new computer.

Re-deploy (if necessary):

For a GitHub Pages site, your website is likely still live and working at its public URL (e.g., your-username.github.io/dolphin-house/). The failure of your laptop doesn't affect the live site.

If you used a different service (like a custom GitHub Actions workflow), you may need to install any necessary tools (like a static site generator or build tools) and then run a new build/deployment command, though simply cloning often restores everything you need to continue development.

You are now back up and running. The cloned folder is your new local copy, and you can make changes, commit them, and push them back to GitHub just as you did before.

======================================================================