---
import Layout from "../layouts/Layout.astro";
// Load structured gallery data with categories and captions
import galleryData from "../../data/gallery.json";

type ImageItem = { src: string; alt: string };
type Section = { title: string; images: ImageItem[] };

const sections: Section[] = (galleryData as any)?.sections || [];
---

<Layout title="Photo Gallery | Dolphin House Alibaug" description="View photos of Dolphin House Beach Resort Alibaug - rooms, swimming pool, restaurant, hotel exterior & facilities. See what awaits you at our beachside resort.">
  <section class="mb-8">
    <h1 class="text-3xl font-semibold">Photo Gallery</h1>
    <p class="text-gray-600 mt-2">Explore our resort â€” rooms, pool, restaurant, and nearby attractions.</p>
  </section>

  {sections?.length ? (
    sections.map((section, sIndex) => (
      <section class="mb-10">
        <h2 class="text-2xl font-semibold mb-4">{section.title}</h2>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
          {section.images.map((img, iIndex) => (
            <figure class="rounded-lg overflow-hidden bg-white shadow-sm">
              <img
                src={img.src}
                alt={img.alt}
                loading={sIndex === 0 && iIndex === 0 ? "eager" : "lazy"}
                fetchpriority={sIndex === 0 && iIndex === 0 ? "high" : "auto"}
                decoding="async"
                class="w-full h-full object-cover aspect-[4/3]"
              />
              <figcaption class="text-sm text-gray-600 px-3 py-2">{img.alt}</figcaption>
            </figure>
          ))}
        </div>
      </section>
    ))
  ) : (
    <p class="text-gray-500">No images found yet. Populate <code class="px-1 py-0.5 bg-gray-100 rounded">data/gallery.json</code> and redeploy.</p>
  )}
</Layout>